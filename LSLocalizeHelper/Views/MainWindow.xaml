<!--
  Links
  Material Design Toolkit: https://github.com/MaterialDesignInXAML/MaterialDesignInXamlToolkit/wiki/Getting-Started
-->
<Window x:Class="LSLocalizeHelper.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converter="clr-namespace:LSLocalizeHelper.Converter" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:enums="clr-namespace:LSLocalizeHelper.Enums"
        xmlns:global="clr-namespace:" xmlns:lsLocalizeHelper="clr-namespace:LSLocalizeHelper" xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        x:Name="WindowMain" Title="MainWindow"
        Width="1280" Height="700" MinWidth="640"
        MinHeight="400"
        Background="{DynamicResource MaterialDesignPaper}"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        FontFamily="{materialDesign:MaterialDesignFont}"
        LocationChanged="WindowMain_LocationChanged" SizeChanged="WindowMain_SizeChanged" WindowStartupLocation="Manual"
        mc:Ignorable="d">
  <Window.Resources>
    <converter:OriginStatusConverter x:Key="OriginStatusConverter" />
    <converter:TextQuickSearchMultiConverter x:Key="TextQuickSearchMultiConverter" />
  </Window.Resources>

  <Grid Margin="10,10,10,10" ShowGridLines="False">
    <Grid.RowDefinitions>
      <RowDefinition Height="40" ToolTip="RowToolbar" />
      <RowDefinition Height="200" ToolTip="Files" />
      <RowDefinition Height="5" ToolTip="SplitterGridTop" />
      <RowDefinition Height="*" ToolTip="Grid" />
      <RowDefinition Height="5" ToolTip="SplitterGridBottom" />
      <RowDefinition Height="150" ToolTip="RowTranslation" />
      <RowDefinition Height="150" ToolTip="RowOrigins" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
    </Grid.ColumnDefinitions>

    <ToolBar Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4"
             HorizontalAlignment="Left">
      <Button x:Name="CmdShowSettings"
              Click="CmdShowSettings_Click" Content="Einstellungen" />
      <Separator />
      <Button x:Name="ButtonLoad"
              Click="ButtonLoad_OnClick" Content="Laden" />
      <Button x:Name="ButtonSave"
              Click="ButtonSave_OnClick" Content="Speichern" />
      <Separator />
      <Button x:Name="ButtonImport"
              Click="ButtonImport_OnClick" Content="Importiere" />
      <Button x:Name="ButtonPackMods"
              Click="ButtonPackMods_OnClick" Content="Packen" />
      <Separator />
      <Button x:Name="ButtonRefresh"
              Click="ButtonRefresh_OnClick" Content="Aktualisieren" />
      <Separator />
      <Label VerticalContentAlignment="Center" Content="Schnellfilter Datagrid:" />
      <TextBox x:Name="TextBoxQuickSearch" Width="200" />
    </ToolBar>

    <Label Grid.Row="1" Grid.Column="0"
           Height="24"
           Margin="5,0,5,5" VerticalAlignment="Top"
           Content="Projekt auswählen" />

    <ListBox x:Name="ListBoxMods"
             Grid.Row="1" Grid.Column="0"
             Margin="5,24,5,5"
             ItemsSource="{Binding ProjectItems}"
             SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="1"
           Height="24"
           Margin="5,0,5,5" VerticalAlignment="Top"
           Content="Aktuelle Original XML" />
    <ListBox x:Name="ListBoxOriginCurrentFile"
             Grid.Row="1" Grid.Column="1"
             Margin="5,24,5,5"
             ItemsSource="{Binding OriginCurrentFileItems}"
             SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="2"
           Height="24"
           Margin="5,0,5,5" VerticalAlignment="Top"
           Content="Vorherige Original XML" />
    <ListBox Name="ListBoxOriginPreviousFile"
             Grid.Row="1" Grid.Column="2"
             Margin="5,24,5,5"
             ItemsSource="{Binding OriginPreviousFileItems}"
             SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="3"
           Height="24"
           Margin="5,0,5,5" VerticalAlignment="Top"
           Content="Übersetzungsdatei" />
    <ListBox Name="ListBoxTranslatedFile"
             Grid.Row="1" Grid.Column="3"
             Margin="5,24,5,5"
             ItemsSource="{Binding TranslatedFileItems}"
             SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <GridSplitter Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4"
                  Height="5"
                  HorizontalAlignment="Stretch" VerticalAlignment="Center"
                  Background="DimGray" ResizeDirection="Rows" />

    <DataGrid x:Name="TranslationGrid"
              Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4"
              Margin="0,0,0,40"
              AutoGenerateColumns="False" IsReadOnly="True"
              ItemsSource="{Binding DataGridItems}"
              SelectionMode="Single">
      <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Header="#" />
        <DataGridTextColumn Binding="{Binding Mod.Name}" Header="Mod" />
        <DataGridTextColumn Binding="{Binding SourceFile.Name}" Header="Datei" />
        <DataGridTextColumn Binding="{Binding Uuid}" Header="Uid" />
        <DataGridTextColumn Binding="{Binding Version}" Header="Version" />
        <DataGridTemplateColumn Width="*" Header="Translated">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <global:MarkupTextBlock TextWrapping="Wrap">
                <global:MarkupTextBlock.MarkupText>
                  <MultiBinding Converter="{StaticResource TextQuickSearchMultiConverter}">
                    <Binding Path="Text" />
                    <Binding ElementName="TextBoxQuickSearch" Path="Text" />
                  </MultiBinding>
                </global:MarkupTextBlock.MarkupText>
              </global:MarkupTextBlock>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Width="*" Header="Origin">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <global:MarkupTextBlock TextWrapping="Wrap">
                <global:MarkupTextBlock.MarkupText>
                  <MultiBinding Converter="{StaticResource TextQuickSearchMultiConverter}">
                    <Binding Path="Origin" />
                    <Binding ElementName="TextBoxQuickSearch" Path="Text" />
                  </MultiBinding>
                </global:MarkupTextBlock.MarkupText>
              </global:MarkupTextBlock>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Width="*" Header="Previous">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <global:MarkupTextBlock TextWrapping="Wrap">
                <global:MarkupTextBlock.MarkupText>
                  <MultiBinding Converter="{StaticResource TextQuickSearchMultiConverter}">
                    <Binding Path="Previous" />
                    <Binding ElementName="TextBoxQuickSearch" Path="Text" />
                  </MultiBinding>
                </global:MarkupTextBlock.MarkupText>
              </global:MarkupTextBlock>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
      <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
          <Style.Triggers>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Value="{x:Static enums:TranslationStatus.DeletedStatus}">
              <Setter Property="Background" Value="Brown" />
              <Setter Property="Foreground" Value="White" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Value="{x:Static enums:TranslationStatus.NewStatus}">
              <Setter Property="Background" Value="Blue" />
              <Setter Property="Foreground" Value="White" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Value="{x:Static enums:TranslationStatus.OriginStatus}">
              <Setter Property="Foreground" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Value="{x:Static enums:TranslationStatus.TranslatedStatus}">
              <Setter Property="Foreground" Value="Green" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" Value="{x:Static enums:TranslationStatus.UpdatedStatus}">
              <Setter Property="Foreground" Value="Blue" />
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </DataGrid.RowStyle>
    </DataGrid>

    <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4"
                Height="40"
                VerticalAlignment="Bottom">
      <TextBlock Height="40" Text="Status:" />
    </StackPanel>

    <Button x:Name="ButtonCopyTranslated"
            Grid.Row="4" Grid.RowSpan="2"
            Width="100"
            Margin="110,5,105,0" HorizontalAlignment="Left" VerticalAlignment="Top"
            Click="ButtonCopyTranslated_OnClick" Content="Kopieren" />

    <GridSplitter Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4"
                  Height="5"
                  HorizontalAlignment="Stretch" VerticalAlignment="Center"
                  Background="DimGray" ResizeDirection="Rows" />

    <Button x:Name="ButtonPasteTranslated"
            Grid.Row="4" Grid.RowSpan="2" Grid.Column="0"
            Width="100"
            Margin="0,5,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"
            Click="ButtonPasteTranslated_OnClick" Content="Einfügen" />

    <Label Grid.Row="4" Grid.RowSpan="2" Grid.Column="0"
           Height="24"
           Margin="220,5,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"
           Content="Übersetzter Text" />

    <TextBox x:Name="TextBoxTranslated"
             Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="4"
             Margin="0,24,0,0"
             TextWrapping="Wrap" />

    <Label Grid.Row="6" Grid.Column="0"
           Height="24"
           VerticalAlignment="Top"
           Content="Aktueller Text" />

    <global:MarkupTextBlock Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2"
                            Margin="5,30,5,5"
                            TextWrapping="Wrap">
      <global:MarkupTextBlock.MarkupText>
        <MultiBinding Converter="{StaticResource TextQuickSearchMultiConverter}">
          <Binding ElementName="TranslationGrid" Path="CurrentItem.Origin" />
          <Binding ElementName="TextBoxQuickSearch" Path="Text" />
        </MultiBinding>
      </global:MarkupTextBlock.MarkupText>
    </global:MarkupTextBlock>

    <Button x:Name="ButtonCopyCurrent"
            Grid.Row="6" Grid.Column="1"
            Height="24"
            HorizontalAlignment="Right" VerticalAlignment="Top"
            Click="ButtonCopyCurrent_OnClick" Content="Kopieren" />

    <global:MarkupTextBlock Grid.Row="6" Grid.Column="2" Grid.ColumnSpan="2"
                            Margin="5,30,5,5"
                            TextWrapping="Wrap">
      <global:MarkupTextBlock.MarkupText>
        <MultiBinding Converter="{StaticResource TextQuickSearchMultiConverter}">
          <Binding ElementName="TranslationGrid" Path="CurrentItem.Previous" />
          <Binding ElementName="TextBoxQuickSearch" Path="Text" />
        </MultiBinding>
      </global:MarkupTextBlock.MarkupText>
    </global:MarkupTextBlock>

    <Label Grid.Row="6" Grid.Column="2" Grid.ColumnSpan="2"
           Height="24"
           VerticalAlignment="Top"
           Content="Vorheriger Text" />
    <Button x:Name="ButtonCopyPrevious"
            Grid.Row="6" Grid.Column="3"
            Height="24"
            HorizontalAlignment="Right" VerticalAlignment="Top"
            Click="ButtonCopyPrevious_OnClick" Content="Kopieren" />
  </Grid>
</Window>
