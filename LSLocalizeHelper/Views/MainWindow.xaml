<Window x:Name="WindowMain" x:Class="LSLocalizeHelper.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converter="clr-namespace:LSLocalizeHelper.Converter"
        xmlns:enums="clr-namespace:LSLocalizeHelper.Enums"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="700" Width="1280"
        MinHeight="400" MinWidth="640"
        WindowStartupLocation="Manual"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        SizeChanged="WindowMain_SizeChanged"
        LocationChanged="WindowMain_LocationChanged">
  <Window.Resources>
    <converter:OriginStatusConverter x:Key="OriginStatusConverter" />
  </Window.Resources>

  <Grid Margin="10,10,10,10" ShowGridLines="False">
    <Grid.RowDefinitions>
      <RowDefinition ToolTip="RowToolbar" Height="40" />
      <RowDefinition ToolTip="Files" Height="200" />
      <RowDefinition ToolTip="SplitterGridTop" Height="5" />
      <RowDefinition ToolTip="Grid" Height="*" />
      <RowDefinition ToolTip="SplitterGridBottom" Height="5" />
      <RowDefinition ToolTip="RowTranslation" Height="150" />
      <RowDefinition ToolTip="RowOrigins" Height="150" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
      <ColumnDefinition Width="100*" />
    </Grid.ColumnDefinitions>

    <ToolBar Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Grid.ColumnSpan="4">
      <Button x:Name="CmdShowSettings" Content="Einstellungen" Click="CmdShowSettings_Click" />
      <Separator />
      <Button x:Name="ButtonLoad" Content="Laden" Click="ButtonLoad_OnClick" />
      <Button x:Name="ButtonSave" Content="Speichern" Click="ButtonSave_OnClick" />
      <Separator />
      <Button x:Name="ButtonImport" Content="Importiere" Click="ButtonImport_OnClick" />
      <Button x:Name="ButtonPackMods" Content="Packen" Click="ButtonPackMods_OnClick" />
      <Separator />
      <Button x:Name="ButtonRefresh" Content="Aktualisieren" Click="ButtonRefresh_OnClick" />
      <Separator />
      <Label Content="Schnellfilter Datagrid:" VerticalContentAlignment="Center"></Label>
      <TextBox x:Name="TextBoxQuickSerach" Width="200"></TextBox>
    </ToolBar>

    <Label Grid.Row="1" Grid.Column="0" Content="Projekt auswählen"
           Margin="5,0,5,5" VerticalAlignment="Top" Height="24" />

    <ListBox x:Name="ListBoxMods" Grid.Row="1" Grid.Column="0" Margin="5,24,5,5" ItemsSource="{Binding ProjectItems}"
             SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="1" Content="Aktuelle Original XML"
           Margin="5,0,5,5" VerticalAlignment="Top" Height="24" />
    <ListBox x:Name="ListBoxOriginCurrentFile" Grid.Row="1" Grid.Column="1" Margin="5,24,5,5"
             ItemsSource="{Binding OriginCurrentFileItems}" SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="2" Content="Vorherige Original XML" Margin="5,0,5,5" VerticalAlignment="Top"
           Height="24" />
    <ListBox Grid.Row="1" Grid.Column="2" Name="ListBoxOriginPreviousFile" Margin="5,24,5,5"
             ItemsSource="{Binding OriginPreviousFileItems}" SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <Label Grid.Row="1" Grid.Column="3" Content="Übersetzungsdatei" Margin="5,0,5,5" VerticalAlignment="Top"
           Height="24" />
    <ListBox Grid.Row="1" Grid.Column="3" Name="ListBoxTranslatedFile" Margin="5,24,5,5"
             ItemsSource="{Binding TranslatedFileItems}" SelectionMode="Extended">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Mod.Name}" />
            <TextBlock Text=": " />
            <TextBlock Text="{Binding Name}" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>

    <GridSplitter Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="4" Height="5" Background="DimGray"
                  HorizontalAlignment="Stretch" VerticalAlignment="Center" ResizeDirection="Rows" />

    <DataGrid Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="4"
              x:Name="TranslationGrid" AutoGenerateColumns="False"
              ItemsSource="{Binding DataGridItems}"
              IsReadOnly="True"
              SelectionMode="Single"
              Margin="0,0,0,40">
      <DataGrid.Columns>
        <DataGridTextColumn Header="#"
                            Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}" />
        <DataGridTextColumn Header="#"
                            Binding="{Binding Flag}" />
        <DataGridTextColumn Header="Mod" Binding="{Binding Mod.Name}" />
        <DataGridTextColumn Header="Datei" Binding="{Binding SourceFile.Name}" />
        <DataGridTextColumn Header="Uid" Binding="{Binding Uuid}" />
        <DataGridTextColumn Header="Version" Binding="{Binding Version}" />
        <!-- <DataGridTextColumn Header="Text" Binding="{Binding Text}" /> -->
        <DataGridTemplateColumn Header="Text" Width="*" >
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Text}" TextWrapping="Wrap" TextOptions.TextHintingMode="Auto" ></TextBlock>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <!-- <DataGridTextColumn Header="Origin" Binding="{Binding Origin}" /> -->
        <DataGridTemplateColumn Header="Origin" Width="*" >
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Origin}" TextWrapping="WrapWithOverflow" TextOptions.TextHintingMode="Auto" ></TextBlock>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
      <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
          <Style.Triggers>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}"
                         Value="{x:Static enums:TranslationStatus.DeletedStatus}">
              <Setter Property="Background" Value="Brown" />
              <Setter Property="Foreground" Value="White" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}"
                         Value="{x:Static enums:TranslationStatus.NewStatus}">
              <Setter Property="Background" Value="Blue" />
              <Setter Property="Foreground" Value="White" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}"
                         Value="{x:Static enums:TranslationStatus.OriginStatus}">
              <Setter Property="Foreground" Value="Brown" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}"
                         Value="{x:Static enums:TranslationStatus.TranslatedStatus}">
              <Setter Property="Foreground" Value="Green" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=., Converter={StaticResource OriginStatusConverter}}"
                         Value="{x:Static enums:TranslationStatus.UpdatedStatus}">
              <Setter Property="Foreground" Value="Blue" />
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </DataGrid.RowStyle>
    </DataGrid>

    <StackPanel Grid.Row="3" Grid.Column="0" Height="40" VerticalAlignment="Bottom" Grid.ColumnSpan="4">
      <TextBlock Text="Status:" Height="40" />
    </StackPanel>

    <GridSplitter Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="4" Height="5" Background="DimGray"
                  HorizontalAlignment="Stretch" VerticalAlignment="Center" ResizeDirection="Rows" />

    <Button Grid.Row="4" Grid.Column="0" x:Name="ButtonPasteTranslated" Content="Einfügen"
            Click="ButtonPasteTranslated_OnClick"
            HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,5,0,0" Grid.RowSpan="2" Width="100" />

    <Button Grid.Row="4" x:Name="ButtonCopyTranslated" Content="Kopieren"
            Click="ButtonCopyTranslated_OnClick"
            Margin="110,5,105,0" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.RowSpan="2" Width="100" />

    <Label Grid.Row="4" Grid.Column="0" Content="Übersetzter Text" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="220,5,0,0" Grid.RowSpan="2" Height="24" />

    <TextBox Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="4" x:Name="TextBoxTranslated" TextWrapping="Wrap"
             Margin="0,24,0,0" />

    <Label Grid.Row="6" Grid.Column="0" Content="Aktueller Text" VerticalAlignment="Top" Height="24" />
    <Button x:Name="ButtonCopyCurrent" Grid.Row="6" Grid.Column="1" Content="Kopieren"
            Click="ButtonCopyCurrent_OnClick"
            HorizontalAlignment="Right" VerticalAlignment="Top" Height="24" />

    <TextBox Grid.Row="6" Grid.Column="2" Grid.ColumnSpan="2" x:Name="TextBoxPreviousOrigin" TextWrapping="Wrap"
             Margin="0,24,0,0" />

    <Label Grid.Row="6" Grid.Column="2" Content="Vorheriger Text" VerticalAlignment="Top" Height="24"
           Grid.ColumnSpan="2" />
    <Button x:Name="ButtonCopyPrevious" Grid.Row="6" Grid.Column="3" Content="Kopieren"
            Click="ButtonCopyPrevious_OnClick"
            HorizontalAlignment="Right"             VerticalAlignment="Top"             Height="24" />
    <TextBox Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2" x:Name="TextBoxCurrentOrigin" TextWrapping="Wrap"
             Margin="0,24,0,0" />
  </Grid>
</Window>
